#排班系统到SAP系统数据接口协议
#`接口背景: ` 

	通过系统自动对接，将排班系统中员工排班信息同步至SAP考勤模块系统中;
	
#`接口方式`	

	接口方式采用ESB-webservice-文件推送		
	
#`接口数据结构:`
  
  |字段名及描述|字段名|数据类型|最大长度|备注|
  |--|--|--|
  |序号|ZHRXH|NUMC|8|数据在文件中的序号,从1开始|
  |员工编号|PERNR|NUMC|8|053452|
  |班次开始日期|BEGDA|DATS|8| YYYYMMdd格式 20140429|
  |班次结束日期|ENDDA|DATS|8| YYYYMMdd格式 20140429|
  |班次开始时间|BEGUZ|TIMS|6| HH24mmss格式 083000|
  |班次结束时间|ENDUZ|TIMS|6|	 HH24mmss格式 083000|
  |前一天标识|VTKEN|CHAR|1|如果是前一天标识,则为X,否则无任何数据|
  |休息标识|TPROG|CHAR|4|如果是休息,则位OFF，其他无任何数据|
  |排班系统(数据来源)|ZHRPBXT|CHAR|1|固定数字：2,在SAP系统里表示排班系统|

#`接口数据处理逻辑:`
	1. 接口数据每天推送一次
	2. 接口发送前一天的排班数据
	3. 如果员工的工作时间不连续,则将时间段分别传送给SAP
		假设员工上班时间是09:00-12:00 和13:00-18:00,则需要发送两条数据到SAP
	4. 如果员工的工作时间连续,且工作时间跨度大于24小时,则需要拆分,拆分规则是:
		假设员工上班时间是06-05 08:00 -- 06-06 14:00,则拆分两条记录;
		1、 06-05 08:00 -- 06-05 :08:00 (注意,超过24小时的分段,开始和结束时间都必须等于开始时间)
		2、 06-06 08:00 -- 06-06 :14:00
			第二条数据的是否前一天标识为 X,
	5. 如果员工当天休息，则班次开始日期和班次结束日期是当天日期,时间为空;休息标识为OFF
	6. 假如某员工06-08日期的排班数据已发送给了SAP,但管理员在06-13日期将06-08日期的排班进行修改,则系统需要再把06-08的排班发送给SAP系统
	
#`异常处理:`		
		如果每日发送失败,则需要有通知用户发送失败,通知方式是邮件,重发方式为系统功能,手动触发

#`异常监控`		
		接口数据发送需要记录日志,以便能分析业务异常
		
